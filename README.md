# nifi-processors2group
–í—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å –º–∞–ø–ø–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –∫ –≥—Ä—É–ø–ø–∞–º, —Å —É—á–µ—Ç–æ–º –∏–µ—Ä–∞—Ä—Ö–∏–∏.

# NiFi Processors Inventory Logger

–°–∫—Ä–∏–ø—Ç –¥–ª—è **Apache NiFi ScriptedReportingTask**, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ö–æ–¥–∏—Ç –¥–µ—Ä–µ–≤–æ –≥—Ä—É–ø–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –≤—ã–≤–æ–¥–∏—Ç –≤ –ª–æ–≥ –º–∞–ø–ø–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –∫ –∏—Ö –ø—É—Ç—è–º (–≥—Ä—É–ø–ø–∞–º). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Root/Folder1/Folder2`) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ (Loki, ELK, Splunk).

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
* **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø.
* **–§–æ—Ä–º–∞—Ç Logfmt:** –°—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞ –∏–¥–µ–∞–ª—å–Ω–æ –ø–∞—Ä—Å—è—Ç—Å—è –≤ Grafana Loki –∫–æ–º–∞–Ω–¥–æ–π `| logfmt`.
* **JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ ID, —Ç–∞–∫ –∏ –∏–º–µ–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤:** –≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –∫–∞–≤—ã—á–∫–∏ –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –≥—Ä—É–ø–ø.

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª `ScriptedReportingTask.groovy` –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å NiFi –≤ –¥–æ—Å—Ç—É–ø–Ω—É—é –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.  
*–ü—Ä–∏–º–µ—Ä –ø—É—Ç–∏:* `/opt/nifi/scripts/inventory/ScriptedReportingTask.groovy`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ NiFi
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Global Menu** (‚ò∞) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.
2. –í—ã–±–µ—Ä–∏—Ç–µ **Controller Settings**.
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Reporting Tasks** –∏ –Ω–∞–∂–º–∏—Ç–µ **+**.
4. –ù–∞–π–¥–∏—Ç–µ –≤ —Å–ø–∏—Å–∫–µ `ScriptedReportingTask` –∏ –Ω–∞–∂–º–∏—Ç–µ **Add**.

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–≤–æ–π—Å—Ç–≤ (Properties)
–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏) –∏ —É–∫–∞–∂–∏—Ç–µ:

* **Script Engine:** `Groovy`
* **Script File:** `/–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/—Ñ–∞–π–ª—É/ScriptedReportingTask.groovy`
* **Script Body:** *–û—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º*

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (Settings)
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Settings**.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Run Schedule** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `30 mins` –∏–ª–∏ `1 hour`, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å –ª–æ–≥–∏).
3. –ù–∞–∂–º–∏—Ç–µ **Apply** –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–¥–∞—á—É –∫–Ω–æ–ø–∫–æ–π **Start** (‚ñ∂Ô∏è).

---

## üìù –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –≤ –ª–æ–≥
–°–∫—Ä–∏–ø—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ `nifi-app.log` –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```text
NIFI_INVENTORY groupId="312f2923-..." groupPath="Root/Production/Ingestion" parentsJson="[\"Root\",\"Production\",\"Ingestion\"]" processorCount=1 processorsJson="[{\"id\":\"a1b2c3d4-...\",\"name\":\"GetFile\"}]"
